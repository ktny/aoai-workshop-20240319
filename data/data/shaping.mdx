---
title: データ編集
---
import Img from "../../components/Img.tsx";
import Table from "../../components/commons/Table";

## データ編集

データセットの内容を編集する方法について説明します。

### 編集の種類

編集できる種類は、以下のとおりです。

| ステップ名                     | 説明                                              |
| ----------------------------- | ------------------------------------------------- |
| 新規列作成                     | 数式の結果を使って新しい列を生成します。            |
| 列名変更:version[2.1.5]        | 列の名前を変更します。                             |
| 列削除:version[2.1.5]          | チェックされた列を削除します。                     |
| データ型変更:version[2.1.5]    | 列のデータ型を変更します。                         |
| 文字置換:version[2.1.5]        | 検索した文字列を新しい文字列に置き換えます。        |
| 数式による変更                 | 数式を使って列の値を変更します。                    |
| 列移動:version[2.1.5]          | 列の位置を移動します。                             |
| 列のコピー:version[2.1.5]      | 列を複製します。                                  |
| 行フィルター:version[2.1.5]    | 条件を満たす行のみに絞り込みます。                  |
| サンプリング                   | 行をランダムに絞り込みます。                       |
| 重複行削除                     | チェックされた列すべてで重複している行を削除します。 |
| 欠損値の補完:version[2.1.5]    | 列の欠損値を指定した値で補完します。                |

### 編集方法
:version[2.1.5]

1. [プロジェクト詳細]画面から、画面左側の[ワークフロー]を選択します。
1. [フロー]パネルより編集するデータセットを選択し、[データ編集]ボタンをクリックします。

   <Img src="/assets/img/capture/capture-shaping-2.png" alt="ワークフロー画面" client:load />

1. データ編集の種類を選択します。(プルダウンから選択することもできます)\
   以降は列名変更を指定した場合を例に説明します。

   <Img src="/assets/img/capture/capture-shaping-4.png" alt="データ編集処理の一覧" client:load />

   :::note{.hint}
   ヒント

   [コメントを追加]にて、編集内容の説明やメモを追加することができます。:version[2.4.0]\
   「http://」、または「https://」で始まる文字列はURLと認識され、リンクで表示されます。リンクは[Ctrl]キーを押しながらクリックし、表示される画面の[OK]ボタンをクリックすると開くことができます(別タブ表示)。\
   入力した内容を確定するには、入力欄からフォーカスをはずすか[Shift]+[Enter]キーを押してください。
   :::

1. 必要項目を入力し、[ステップ追加]ボタンをクリックします。

   <Img src="/assets/img/capture/capture-shaping-5.png" alt="データ編集画面" client:load />

1. [データ編集実行]ボタンをクリックすると、編集した結果で新たなデータセットを作成します。\
   ステップは複数設定できます。[+ステップ追加]ボタンをクリックして、ステップを追加した後で[データ編集実行]ボタンをクリックします。

   <Img src="/assets/img/capture/capture-shaping-6.png" alt="データ編集実行" client:load />

### ステップの順序の変更・修正・削除方法

操作対象のステップにカーソルを置き、ステップの順序の変更、修正、または削除をおこないます。

   <Img src="/assets/img/capture/capture-shaping-7.png" alt="ステップの順序の変更・修正・削除方法" client:load />

1. クリックすると、ステップの順番を変更できます。
1. 編集内容の説明やメモを追加することができます。:version[2.4.0]\
   「http://」、または「https://」で始まる文字列はURLと認識され、リンクで表示されます。リンクは[Ctrl]キーを押しながらクリックし、表示される画面の[OK]ボタンをクリックすると開くことができます(別タブ表示)。\
   入力した内容を確定するには、入力欄からフォーカスをはずすか[Shift]+[Enter]キーを押してください。
1. ステップを修正できます。
1. ステップを削除できます。

[ワークフロー]画面上に、整形した結果が新しいデータセットとして追加されます。

## 新規列作成

機能：指定した数式の結果を、追加した列に出力します。最終列の右側に列が追加されます。

1. 各項目を入力し、[ステップ追加]ボタンをクリックします。

   <Img src="/assets/img/capture/capture-shaping-8.png" alt="新規列作成" client:load />

   1. 編集内容の説明やメモを追加することができます。:version[2.4.0]\
      「http://」、または「https://」で始まる文字列はURLと認識され、リンクで表示されます。リンクは[Ctrl]キーを押しながらクリックし、表示される画面の[OK]ボタンをクリックすると開くことができます(別タブ表示)。\
      入力した内容を確定するには、入力欄からフォーカスをはずすか[Shift]+[Enter]キーを押してください。
   1. 作成する列の名称を入力します。
   1. 数式を入力します。
      - [列選択]ボタンをクリックすると、数式に使用する列を選択できます。
      - [fx]ボタンをクリックすると、関数を選択できます。

      使用できる関数は、「[関数一覧](/guide/function-list/index.html)」を参照してください。
1. [データ編集実行]ボタンをクリックすると、最終列の右側に列が追加されます。

   <Img src="/assets/img/capture/capture-shaping-9.png" alt="データ編集実行" client:load />

## 列名変更
:version[2.1.5]

機能：指定した列の名称を変更します。一度に複数列の名称を変更することもできます。

1. 各項目を入力し、[ステップ追加]ボタンをクリックします。

   <Img src="/assets/img/capture/capture-shaping-10.png" alt="列名変更" client:load />

   1. 編集内容の説明やメモを追加することができます。:version[2.4.0]\
      「http://」、または「https://」で始まる文字列はURLと認識され、リンクで表示されます。リンクは[Ctrl]キーを押しながらクリックし、表示される画面の[OK]ボタンをクリックすると開くことができます(別タブ表示)。\
      入力した内容を確定するには、入力欄からフォーカスをはずすか[Shift]+[Enter]キーを押してください。
   1. 変更対象の指定方法を選択します。
   1. 変更対象の列と変更後の列名を指定します。\
      項目番号2で選択した指定方法に従って入力してください。
      - 「1列ずつ指定」を選択した場合：\
        以下の項目を指定してください。
        | 項目名            | 説明                                             |
        | ------------------| ------------------------------------------------ |
        | 対象              | 変更する列をプルダウンから選択します。             |
        | 新しい列名        | 変更後の列名を入力します。                         |

      - 「複数列を一度に指定」を選択した場合：\
        列の一覧が表示されますので、各列の右横にある入力欄に変更後の列名を入力してください。\
        なお、上部の入力欄に列名を入力して、表示する列を絞り込むこともできます。
        :::note{.hint}
        ヒント

        - [CSVから一括設定]ボタンをクリックすると、CSVファイルを使用して一括変更をすることができます。\
          CSVファイルは、[テンプレートを取得]ボタンからダウンロードしたファイルを編集して作成することも可能です。
        - CSVファイルの記載ルールは、以下のとおりです。
          - 1列目に変更前の列名、2列目に変更後の列名を記載します。
          - CSVファイルに記載がある列のみが変更対象となります。\
            また、変更後の列名を空欄にしている列は変更されません。
        :::
      - 「指定文字列に一致する箇所をまとめて置換」を選択した場合：\
        以下の項目を指定してください。
        | 項目名                   | 説明                                                                                                 |
        | -------------------------| --------------------------------------------------------------------------------------------------- |
        | 正規表現を使用する        | チェックを入れると、[指定文字列]に正規表現が使用できます。                                              |
        | 指定文字列               | 置換対象となる文字列を指定します。                                                                     |
        | 置換後の文字列            | 置換後の文字列を指定します。                                                                          |
        | 置換対象の列             | 以下のいずれかから選択してください。                                                                   |
        |                         | - [指定文字列に一致したすべての列]を選択した場合：                                                      |
        |                         | 　[指定文字列]が含まれる列名はすべて置換対象となります。                                                 |
        |                         | - [列を選択]を選択した場合：                                                                           |
        |                         | 　列の一覧が表示されますので、置換対象にしたい列にチェックを入れてください。                              |
        |                         | 　なお、上部の入力欄に列名を入力すると、表示する列を絞り込むことができます。                              |
        |                         | 　指定文字列に一致する列が複数あり、そのうちの一部だけを列名変更の対象にしたい場合に利用することができます。|

1. [データ編集実行]ボタンをクリックすると、列名が変更されます。

## 列削除
:version[2.1.5]

機能：指定した列を削除します。一度に複数列を削除することもできます。

1. 各項目を入力し、[ステップ追加]ボタンをクリックします。

   <Img src="/assets/img/capture/capture-shaping-11.png" alt="列削除" client:load />

   1. 編集内容の説明やメモを追加することができます。:version[2.4.0]\
      「http://」、または「https://」で始まる文字列はURLと認識され、リンクで表示されます。リンクは[Ctrl]キーを押しながらクリックし、表示される画面の[OK]ボタンをクリックすると開くことができます(別タブ表示)。\
      入力した内容を確定するには、入力欄からフォーカスをはずすか[Shift]+[Enter]キーを押してください。
   1. キーワードを入力することにより、削除する列を検索できます。
   1. 削除する列にチェックを入れます。\
      [すべてチェック]ボタンをクリックすると、すべての列のチェックボックスにチェックを入れることができます。\
      [すべてチェックを外す]ボタンをクリックするとすべての列のチェックボックスからチェックをはずすことができます。
1. [データ編集実行]ボタンをクリックすると、指定した列が削除されます。

## データ型変更
:version[2.1.5]

機能：指定列のデータ型を変更します。一度に複数列のデータ型を変更することもできます。

1. 各項目を入力し、[ステップ追加]ボタンをクリックします。

   <Img src="/assets/img/capture/capture-shaping-12.png" alt="データ型変更" client:load />

   1. 編集内容の説明やメモを追加することができます。:version[2.4.0]\
      「http://」、または「https://」で始まる文字列はURLと認識され、リンクで表示されます。リンクは[Ctrl]キーを押しながらクリックし、表示される画面の[OK]ボタンをクリックすると開くことができます(別タブ表示)。\
      入力した内容を確定するには、入力欄からフォーカスをはずすか[Shift]+[Enter]キーを押してください。
   1. プルダウンから変更後のデータ型を選択します。\
      データ型を選択した列のみが変更対象となります。\
      データ型については、「[データ型の種類](/guide/data-types/index.html)」を参照してください。\
      なお、上部の入力欄に列名を入力して、表示する列を絞り込むこともできます。
1. [データ編集実行]ボタンをクリックすると、データ型が変更されます。

## 文字置換
:version[2.1.5]

機能：指定した列の内容を、指定した文字列に置換します。

1. 各項目を入力し、[ステップ追加]ボタンをクリックします。

   <Img src="/assets/img/capture/capture-shaping-14.png" alt="文字置換" client:load />

   1. 編集内容の説明やメモを追加することができます。:version[2.4.0]\
      「http://」、または「https://」で始まる文字列はURLと認識され、リンクで表示されます。リンクは[Ctrl]キーを押しながらクリックし、表示される画面の[OK]ボタンをクリックすると開くことができます(別タブ表示)。\
      入力した内容を確定するには、入力欄からフォーカスをはずすか[Shift]+[Enter]キーを押してください。
   1. 置換対象列の指定方法を選択します。
   1. 置換対象の列を指定します。\
      データ型が文字列型の列のみ置換できます。
   1. 置換対象を検索するための文字列を指定します。\
      [正規表現を使用する]にチェックを入れると、正規表現を使用して指定できます。
   1. 置換後の文字列を指定します。
1. [データ編集実行]ボタンをクリックすると、指定した内容で変更が行われます。

## 数式による変更

機能：指定した数式の結果で、元のデータを置換します。

1. 各項目を入力し、[ステップ追加]ボタンをクリックします。

   <Img src="/assets/img/capture/capture-shaping-15.png" alt="数式による変更" client:load />

   1. 編集内容の説明やメモを追加することができます。:version[2.4.0]\
      「http://」、または「https://」で始まる文字列はURLと認識され、リンクで表示されます。リンクは[Ctrl]キーを押しながらクリックし、表示される画面の[OK]ボタンをクリックすると開くことができます(別タブ表示)。\
      入力した内容を確定するには、入力欄からフォーカスをはずすか[Shift]+[Enter]キーを押してください。
   1. 変更する列を指定します。
   1. 数式を入力します。
      - [列選択]ボタンをクリックすると、数式に使用する列を選択できます。
      - [fx]ボタンをクリックすると、関数を選択できます。\
        使用できる関数は、「[関数一覧](/guide/function-list/index.html)」を参照してください。
1. [データ編集実行]ボタンをクリックすると、データが置換されます。

## 列移動
:version[2.1.5]

機能：指定列を移動します。一度に複数行を移動することもできます。

1. 各項目を入力し、[ステップ追加]ボタンをクリックします。

   <Img src="/assets/img/capture/capture-shaping-16.png" alt="列移動" client:load />

   1. 編集内容の説明やメモを追加することができます。:version[2.4.0]\
      「http://」、または「https://」で始まる文字列はURLと認識され、リンクで表示されます。リンクは[Ctrl]キーを押しながらクリックし、表示される画面の[OK]ボタンをクリックすると開くことができます(別タブ表示)。\
      入力した内容を確定するには、入力欄からフォーカスをはずすか[Shift]+[Enter]キーを押してください。
   1. プルダウンから移動する列を選択します。複数選択が可能です。
   1. 指定した項目の前/後のどちらに移動するか指定します。
   1. この列の前後に列が移動します。
1. [データ編集実行]ボタンをクリックすると、列の移動を実行します。

## 列のコピー
:version[2.1.5]

機能：指定列を別名でコピーします。

1. 各項目を入力し、[ステップ追加]ボタンをクリックします。

   <Img src="/assets/img/capture/capture-shaping-17.png" alt="列のコピー" client:load />

   1. 編集内容の説明やメモを追加することができます。:version[2.4.0]\
      「http://」、または「https://」で始まる文字列はURLと認識され、リンクで表示されます。リンクは[Ctrl]キーを押しながらクリックし、表示される画面の[OK]ボタンをクリックすると開くことができます(別タブ表示)。\
      入力した内容を確定するには、入力欄からフォーカスをはずすか[Shift]+[Enter]キーを押してください。
   1. プルダウンからコピー元となる列を選択します。
   1. コピーした列の名称を入力します。
1. [データ編集実行]ボタンをクリックすると、最終列の右側に列をコピーします。

## 行フィルター
:version[2.1.5]

機能：条件に合致する行のみに絞り込む機能です。

1. 各項目を入力し、[ステップ追加]ボタンをクリックします。

   <Img src="/assets/img/capture/capture-shaping-18.png" alt="行フィルター" client:load />

   1. 編集内容の説明やメモを追加することができます。:version[2.4.0]\
      「http://」、または「https://」で始まる文字列はURLと認識され、リンクで表示されます。リンクは[Ctrl]キーを押しながらクリックし、表示される画面の[OK]ボタンをクリックすると開くことができます(別タブ表示)。\
      入力した内容を確定するには、入力欄からフォーカスをはずすか[Shift]+[Enter]キーを押してください。
   1. プルダウンからフィルター対象の列を選択します。
   1. フィルター条件を入力します。\
      フィルターで指定できる条件については、後述の「[フィルター条件](#フィルター条件)」を参照してください。
   1. フィルター条件を複数指定する際に、条件の組み合わせ方法を指定します。
      - すべてのフィルター条件に合致する行のみに絞り込む場合：\
        [AND]ボタンをクリックします。
      - いずれかのフィルター条件に合致する行のみに絞り込む場合：\
        [OR]ボタンをクリックします。
   1. クリックするとフィルター条件を追加できます。フィルター条件は、5つまで指定できます。

   ### フィルター条件

   フィルターで指定できる条件は以下のとおりです。
   #### フィルター条件とデータ型
   | 条件                                          | 整数型/小数型/日時型/日付型/時間型 | 文字列型                | 論理型                   |
   | --------------------------------------------- | -------------------------------- | ------------------------|------------------------ |
   | 次の値の間                                     | ○                                 | -                       | -                      |
   | 次の値の間以外                                 | ○                                 | -                       | -                      |
   | 次の値に等しい                                 | ○                                 | ○                       | ○                      |
   | 次の値に等しくない                             | ○                                 | ○                       | ○                      |
   | 次の値より大きい(次の値より後):version[2.1.6]   | ○                                 | -                       | -                      |
   | 次の値より小さい(次の値より前):version[2.1.6]   | ○                                 | -                       | -                      |
   | 次の値以上(次の値以後):version[2.1.6]          | ○                                 | -                       | -                      |
   | 次の値以下(次の値以前):version[2.1.6]          | ○                                 | -                       | -                      |
   | 次の値を含む                                   | -                                 | ○                       | -                      |
   | 次の値を含まない                               | -                                 | ○                       | -                      |
   | 次の値で始まる                                 | -                                 | ○                       | -                      |
   | 次の値で終わる                                 | -                                 | ○                       | -                      |
   | 欠損値(※)                                     | ○                                 | ○                       | ○                      |
   | 欠損値以外                                     | ○                                 | ○                       | ○                      |

   ※欠損値には、NULL(データが無い状態)と空白文字列(“”)の両方が含まれています。

1. [データ編集実行]ボタンをクリックすると、フィルター処理を実行します。
   :::note{.hint}
   ヒント

   [+ステップ追加]にて、複数のフィルターを設定した場合は、ステップごとのフィルター結果すべてに合致するデータのみが残ります。
   :::

## サンプリング

機能：指定に応じた量まで、ランダムに行を絞り込む機能です。

:::note{.hint}
ヒント

AFEに適したデータの絞り込みをおこなうために、[データセット一覧]画面からスマートサンプリングをする場合があります。詳細は、「[サンプリング](/guide/analyze-large-data/index.html)」を参照してください。
:::

1. 各項目を入力し、[ステップ追加]ボタンをクリックします。

   <Img src="/assets/img/capture/capture-shaping-19.png" alt="サンプリング" client:load />

   1. 編集内容の説明やメモを追加することができます。:version[2.4.0]\
      「http://」、または「https://」で始まる文字列はURLと認識され、リンクで表示されます。リンクは[Ctrl]キーを押しながらクリックし、表示される画面の[OK]ボタンをクリックすると開くことができます(別タブ表示)。\
      入力した内容を確定するには、入力欄からフォーカスをはずすか[Shift]+[Enter]キーを押してください。
   1. 指定した量に応じてランダムに行を絞り込みます。
      - [パーセント]：\
        全データの内、指定した割合分まで行を絞り込みます。\
        値は、0～100の範囲で指定できます。
      - [行数]：\
        全データの内、指定した行数まで行を絞り込みます。\
        行数は、1～全データの行数の範囲で指定できます。

1. [データ編集実行]ボタンをクリックすると、絞り込み処理を実行します。

## 重複行削除

機能：重複した行だけを削除し、重複のないデータセットを作る機能です。

:::note{.hint}
ヒント

たとえばあるIDが3行存在するデータに対して重複行削除をおこなうと、2行が削除され、1行だけが残ったデータセットを生成できます。
:::

1. 各項目を入力し、[ステップ追加]ボタンをクリックします。

   <Img src="/assets/img/capture/capture-shaping-20.png" alt="重複行削除" client:load />

   1. 編集内容の説明やメモを追加することができます。:version[2.4.0]\
      「http://」、または「https://」で始まる文字列はURLと認識され、リンクで表示されます。リンクは[Ctrl]キーを押しながらクリックし、表示される画面の[OK]ボタンをクリックすると開くことができます(別タブ表示)。\
      入力した内容を確定するには、入力欄からフォーカスをはずすか[Shift]+[Enter]キーを押してください。
   1. キーワードを入力することにより、削除する列を検索できます。
   1. 重複行を削除する列にチェックを入れます。\
      [すべてチェック]ボタンをクリックすると、すべての列にチェックを入れることができます。\
      [すべてチェックを外す]ボタンをクリックするとすべての列からチェックをはずすことができます。

1. [データ編集実行]ボタンをクリックすると、重複した行が削除されます。

## 欠損値の補完
:version[2.1.5]

機能：指定した列の欠損値を、任意の値で補完する機能です。

1. 各項目を入力し、[ステップ追加]ボタンをクリックします。

   <Img src="/assets/img/capture/capture-shaping-21.png" alt="欠損値の補完" client:load />

   1. 編集内容の説明やメモを追加することができます。:version[2.4.0]\
      「http://」、または「https://」で始まる文字列はURLと認識され、リンクで表示されます。リンクは[Ctrl]キーを押しながらクリックし、表示される画面の[OK]ボタンをクリックすると開くことができます(別タブ表示)。\
      入力した内容を確定するには、入力欄からフォーカスをはずすか[Shift]+[Enter]キーを押してください。
   1. キーワードを入力することにより、補完する列を検索できます。
   1. 補完する列にチェックを入れます。\
      [すべてチェック]ボタンをクリックすると、すべての列にチェックを入れることができます。\
      [すべてチェックを外す]ボタンをクリックするとすべての列からチェックをはずすことができます。
   1. 補完する値を入力します。
      :::note{.point}
      ポイント

      補完する値は、補完する列のデータ型に則した書式で入力する必要があります。\
      データ型については「[データ型の種類](/guide/data-types/index.html)」を参照し、以下のルールに従って入力してください。\
      なお、すべてのデータ型において空文字を設定することはできません。
      <Table
         headers={ [ "データ型", "入力ルール" ] }
         rows={[
           [ { value: "整数型", rowSpan: 2 }, "・-9223372036854775808～9223372036854775807の範囲の整数を半角で入力してください。" ],
           [ "・小数点は使用できません。" ],
           [ { value: "小数型", rowSpan: 2 }, "・15桁精度の範囲の小数を半角で入力してください。" ],
           [ "・nanやinf、-infは使用できません。" ],
           [ { value: "日付型/日時型", rowSpan: 9 }, "以下のいずれかの書式で、日付を半角で入力してください。" ],
           [ "・YYYY/MM/DD" ],
           [ "・YYYY-MM-DD" ],
           [ "・MM/DD/YYYY" ],
           [ "・MM-DD-YYYY" ],
           [ "・YYYYMMDD" ],
           [ "・MMDDYYYY" ],
           [ "なお、上記の日付の後に時刻を付け加えることもできます。" ],
           [ "時刻の入力ルールについては、この表の「時刻型」を参照してください。" ],
           [ { value: "論理型", rowSpan: 9 }, "以下のいずれかを半角で入力してください。" ],
           [ "・真の場合：" ],
           [ "　・tもしくはT" ],
           [ "　・trueもしくはTRUE" ],
           [ "　・1" ],
           [ "・偽の場合：" ],
           [ "　・fもしくはF" ],
           [ "　・falseもしくはFALSE" ],
           [ "　・0" ],
           [ { value: "時刻型", rowSpan: 3 }, "以下のいずれかの書式で、時刻を半角で入力してください。" ],
           [ "・HH:MM:SS" ],
           [ "・HH:MM" ],
           [ "文字列型", "制限なし" ],
        ]}
      />
      :::
1. [データ編集実行]ボタンをクリックすると、指定した列の欠損値が補完されます。
