---
title: Tableauとの連携
---
import Img from "../../components/Img.tsx";

Tableauとのデータの連携方法について説明します。\
KIでは、以下の種類の連携ができます。

- TableauにKIで作成したデータセットの取り込み
- KIにTableauのデータソースの取り込み

この連携機能を用いることにより、Tableau、またはKIで作成したデータをもう一方で活用することができます。

## 動作確認済みTableau製品

動作確認済みのTableau製品は、以下のとおりです。

- Tableau Desktop 2019.4 - 2021.3 (Windows/Mac)
- Tableau Server 2019.4 - 2021.3 (Windows/Linux)

## データ型の変換

KIとTableau間でデータを連携する際に、それぞれの製品で扱えるデータ型に変換されます。\
KIの各データ型に対するTableauのデータ型は、以下表のとおりです。

| KI       | Tableau    |
| -------- | ---------- |
| 論理型   | ブール     |
| 日付型   | 日付       |
| 日時型   | 日付と時刻 |
| 時間型   | 日付と時刻 |
| 小数型   | 数値(小数) |
| 整数型   | 数値(整数) |
| 文字列型 | 文字列     |
| - (※)    | 地理的     |

※地理的型をKIに取り込む場合は、ジオメトリタイプの文字列のみを文字列型で取り込みます。

:::note{.hint}
ヒント

KIのデータ型の詳細については、「[データ型の種類](/guide/data-types/index.html)」、Tableauのデータ型の詳細については、Tableauのマニュアルを参照してください。
:::

## TableauにKIのデータセットを取り込む

TableauにKIのデータセットを取り込む方法について説明します。

1. Tableau Desktopにて「Web データ コネクタ」を起動し、URL欄に以下を入力します。

   `http://`KIをインストールしたサーバーのドメイン名/tableau/wdc

1. Tableau Desktop上に、KIの[ログイン]画面が表示されますので、APIキーを入力後、[ログイン]ボタンをクリックします。

   <Img src="/assets/img/capture/capture-connect-to-tableau-1.png" alt="ログイン画面" client:load />

   :::note{.hint}
   ヒント

   APIキーは、KIの[アカウント設定]画面から取得できます。\
   なお、上記画面上の「アカウント設定」をクリックすると、KIが起動し[アカウント設定]画面を表示できます。\
   [アカウント設定]画面の詳細は、「[ユーザー設定](/guide/user-setting/index.html#ユーザー設定)」を参照してください。
   :::

1. データセットを選択する画面が表示されますので、Tableau Desktopに取り込むデータセットを選択し、[接続]ボタンをクリックします。

   <Img src="/assets/img/capture/capture-connect-to-tableau-2.png" alt="データセット選択画面" client:load />

   :::note{.hint}
   ヒント

   データを取り込む際に、KIで使用できるデータ型に変換されます。 詳細については、「[データ型の変換](#データ型の変換)」を参照してください。
   :::

1. Tableau Desktopのデータソース一覧画面が表示されますので、[今すぐ更新]ボタン、または[自動更新]ボタンをクリックしてデータを取り込みます。

:::note{.point}
ポイント

- Tableauの使用方法については、Tableauのマニュアルを参照してください。
- Tableau Serverを使用する場合は、以下点に注意してください。
  - 事前にTableau Serverのセーフリストに、以下のKIのWeb データ コネクタ URLを追加してください。\
    `http://`KIをインストールしたサーバーのドメイン名/tableau/wdc

  - データセットをTableau Serverで使用する場合は、まずこの章の手順に沿ってTableau DesktopでKIのデータセットをデータソースに追加します。\
    その後Tableau Serverへログインし、該当のデータソースをパブリッシュしてください。
    なお、パブリッシュする際の「認証」方法は、「埋め込みパスワード」に変更してください。
- KIとの間でクライアント証明書を使用していると、KIの[ログイン]画面を表示できない場合があります。
:::

## KIにTableauのデータソースを取り込む

KIにTableauのデータソースを取り込む方法について説明します。\
取り込みにあたり、新しいデータセットとして追加するか、既存のデータセットを更新するかを指定できます。

:::note{.point}
ポイント

TableauのデータソースをKIに取り込むには、Tableauの拡張機能を使用します。\
Tableauの拡張機能の使用にあたり、以下の点など注意が必要となります。

- HTTPS必須
- Tableau DesktopでJavaScriptを有効にする

なお、Tableau Serverで拡張機能を使用する場合は、セーフリストにKIのURLを登録する必要があります。
詳細は、Tableau Serverの管理者にお問い合わせください。
:::

1. 以下からtrexファイル(マニフェストファイル)をダウンロードします。

   `http://`KIをインストールしたサーバーのドメイン名/tableau/extension/trex

1. Tableauのワークブックでダッシュボードを開き、[オブジェクト]セクションから[拡張]をダッシュボードにドラッグします。
1. [拡張を選択する]画面が表示されますので、[拡張]ボタンをクリックし、手順1.でダウンロードしたtrexファイルを指定します。
1. Tableau上に、KIの[ログイン]画面が表示されますので、APIキーを入力後、[ログイン]ボタンをクリックします。

   <Img src="/assets/img/capture/capture-connect-to-tableau-3.png" alt="ログイン画面" client:load />

   :::note{.hint}
   ヒント

   APIキーは、KIの[アカウント設定]画面から取得できます。\
   なお、上記画面の「アカウント設定」をクリックすると、KIが起動し[アカウント設定]画面を表示できます。\
   [アカウント設定]画面の詳細は、「[ユーザー設定](/guide/user-setting/index.html#ユーザー設定)」を参照してください。
   :::

1. データソースの一覧が表示されますので、KIへ取り込むデータソースを選択し、[次へ]ボタンをクリックします。


   <Img src="/assets/img/capture/capture-connect-to-tableau-4.png" alt="データソース選択画面" client:load />
1. オプションを選択する画面が表示されますので、各種設定をおこない[KIにエクスポート]ボタンをクリックします。

   <Img src="/assets/img/capture/capture-connect-to-tableau-5.png" alt="オプション選択画面" client:load />

   1. KIへ取り込むデータの行数を指定します。\
      最大10,000行まで指定できます。\
      10,000行以上のデータを取り込む場合は、取り込み元のデータソースをCSVファイルなどにエクスポートし、そのファイルをデータセットとしてインポートしてください。\
      データセットのインポートについては、「[データのインポート](/guide/registration-dataset/index.html)」を参照してください。
   1. 出力方法を[新しいデータセットを作成]、または[既存のデータセットを更新]から選択します。\
      [既存のデータセットを更新]を選択した場合は、以前にTableauの拡張機能を使ってエクスポートしたデータセットの一覧が表示されますので、更新するデータセットを選択してください。

   :::note{.hint}
   ヒント

   - KIに取り込める列数の上限は1,000となります。
   - データを取り込む際に、KIで使用できるデータ型に変換されます。\
      詳細については、「[データ型の変換](#データ型の変換)」を参照してください。
   :::

1. データの取り込みが完了すると、以下の画面が表示されますので[KIを起動]ボタンをクリックします。\
   なお、データの取り込みには時間を要する場合があります。

   <Img src="/assets/img/capture/capture-connect-to-tableau-6.png" alt="エクスポート完了画面" client:load />

   :::note{.hint}
   ヒント

   - Tableauのデータソースから取り込んだデータセットは、[データセット一覧]画面、および[ワークフロー]画面上に:big-icon[/assets/img/common/icon-document-tableau.svg,Tableau]アイコンで表示されます。
   - 一度取り込み済みのTableauのデータソースから最新のデータを取り込むには、この章の手順に沿って、既存のデータセットの更新をしてください。
   :::
