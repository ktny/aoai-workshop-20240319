---
title: スケジュール
---
import Table from "../../components/commons/Table";
import Img from "../../components/Img.tsx";

:version[2.1.5]

スケジュール実行について説明します。\
スケジュール実行では、以下のアクションを定期的に決まった時間に実行することができます。

| アクション名 | 説明 |
| ------------ | ---- |
| プロジェクト更新 | 指定したプロジェクトのワークフローや分析を最新の内容に更新します。 |
| データセット更新 | 指定したデータセットを外部データベースやURLから再取得します。 |
| 分析用データを出力 | 指定したプロジェクト内の分析用データを、外部データベースやKI内のデータセットに出力します。 |
| データセットを出力 | 指定したデータセットを、外部データベースに出力します。 |
| AFE - 特徴量を出力 | 指定したAFEのすべての特徴量を、外部データベースやKI内のデータセットに出力します。 |
| AFE - セグメントを出力 | 指定したAFEのすべてのセグメントを、外部データベースやKI内のデータセットに出力します。 |
| ターゲットリスト-リストを出力 | 指定したターゲットリストから、予測の基準日を設定したリストを外部データベースやKI内のデータセットに出力します。 |

- スケジュール実行に追加できるアクションは、設定を実施するユーザーが操作権限を持つアクションに限ります。
- アクションは複数を組み合わせて実行することも可能で、KIを使ったさまざまなタスクを自動化することができます。\
  例)
  - ワークフローを自動更新し、マトリックスを常に最新の状態に保つ。
  - データベースから最新のデータを定期取得してターゲットリストを再計算し、結果を外部データベースに出力する。

なお、スケジュール実行の設定や実行履歴の確認は、管理者、または管理者から権限を付与されたユーザーのみ可能です。:version[2.1.6]\
権限設定の詳細については「[権限設定](/guide/system-setting/index.html#権限設定)」を参照してください。
:::note{.hint}
ヒント

スケジュールの実行結果は、外部のチャットサービスと連携してチャットに通知することができます。:version[2.1.6]\
詳細については、「[スケジュール実行結果のチャット通知](/guide/notification/index.html)」を参照してください。
:::

## スケジュール実行
スケジュール実行の設定方法について説明します。

### スケジュール画面の表示
1. [スケジュール機能]ボタン(以下画面の青枠部分)をクリックします。

   <Img src="/assets/img/capture/capture-schedule-1.png" alt="[スケジュール機能]ボタン" client:load />

   [スケジュール一覧]画面が表示されます。

   <Img src="/assets/img/capture/capture-schedule-2.png" alt="[スケジュール一覧]画面" client:load />

### スケジュールの追加
スケジュールの追加について説明します。

1. [スケジュール一覧]画面から、[+スケジュール追加]ボタンをクリックします。

   <Img src="/assets/img/capture/capture-schedule-3.png" alt="[+スケジュール追加]ボタン" client:load />

1. [新規スケジュール]画面が表示されますので、スケジュールの名前とトリガーの設定をおこないます。

   <Img src="/assets/img/capture/capture-schedule-4.png" alt="[新規スケジュール]画面" client:load />

   1. スケジュールの状態を切り換えることができます。:version[2.3.0]\
      [一時停止中]にすると、一時的にスケジュールが無効になります。
   1. スケジュールの名前を入力します。
   1. スケジュール実行するタイムゾーンをプルダウンから選択します。
   1. スケジュール実行する頻度を指定します。:version[2.3.0]
      - [毎日]：\
        日次で実行します。\
        実行する時間を指定してください。
      - [毎週]：\
        週次で実行します。\
        実行する曜日、および時間を指定してください。
      - [毎月]：\
        月次で実行します。\
        実行する日にち、および時間を指定してください。
      - [カスタム]：\
        任意の頻度で実行します。\
        実行する頻度をcron形式で指定してください。\
        例）「*/15 * * * *」と指定すると、15分間隔で実行します。
1. [+アクションの追加]ボタンをクリックして、実行するアクションを選択します。
1. 選択したアクションが追加されますので、画面の内容に従って設定してください。

   <Img src="/assets/img/capture/capture-schedule-6.png" alt="[新規スケジュール]画面(アクション設定)" client:load />

   1. アクション名が表示されます。\
      クリックすると、アクションを再選択することができます。
   1. アクションを実行する順番を並び替えることができます。
   1. アクションを削除できます。
   1. クリックすると、アクションの詳細情報を開閉できます。
   1. 選択したアクションに応じて、設定をおこないます。
      <Table
         headers={ [ "アクション名", "説明" ] }
         rows={[
           [ { value: "プロジェクト更新", rowSpan: 5 }, "プロジェクトを指定し、更新する分析を選択します。" ],
           [ "- [ワークフローを実行して、分析用データを更新]にチェックを入れると、ワークフローが実行され、分析用データを更新できます。" ],
           [ "- [マトリックス/グラフの初回表示を高速化]にチェックを入れると、スケジュール実行時に更新後のデータに対する計算結果が作成されます。これによりスケジュールの実行時間は長くなりますが、分析の初回の計算結果の表示を速くすることができます。<span class='version'>2.4.0</span>" ],
           [ "- プロジェクト内に更新可能なデータセットが含まれている場合、[○個のデータセット更新を挿入]ボタンが表示されます。" ],
           [ "　クリックすると、[データセット更新]アクションを一括で追加することができます。" ],
           [ "データセット更新", "更新するデータセットを指定します。" ],
           [ { value: "分析用データを出力", rowSpan: 12 }, "出力する分析用データと出力設定を指定します。" ],
           [ "出力設定は以下のいずれかから選択できます。" ],
           [ "- 「KI内のデータセットとして出力」を選択した場合：" ],
           [ "　出力方法を[新規作成]と[既存データセットを上書き]のいずれかから選択し、出力方法に応じて以下の設定をおこなってください。" ],
           [ "　- [新規作成]を選択した場合：" ],
           [ "　　出力先、およびデータセット名を指定してください。" ],
           [ "　　スケジュール実行による再出力の際にデータセットを上書きしたい場合は、[再実行時に前回結果を上書きせず、毎回新しいデータセットを作成]のチェックをはずしてください。" ],
           [ "　- [既存データセットを上書き]を選択した場合：" ],
           [ "　　上書きするデータセットを指定してください。" ],
           [ "　- 「データベースに出力」を選択した場合：" ],
           [ "　　データベースの接続先情報とオプションを設定します。" ],
           [ "　　「<a href='/guide/output-to-database/index.html'>各種データベースに出力</a>」を参考にして、各設定項目を入力してください。" ],
           [ { value: "データセットを出力", rowSpan: 4 }, "出力するデータセットと出力設定を指定します。" ],
           [ "出力設定は「データベースに出力」のみ指定できます。" ],
           [ "データベースの接続先情報とオプションを設定してください。" ],
           [ "「<a href='/guide/output-to-database/index.html'>各種データベースに出力</a>」を参考にして、各設定項目を入力してください。" ],
           [ { value: "AFE - 特徴量を出力", rowSpan: 3 }, "特徴量を出力するAFEと出力設定を指定します。" ],
           [ "出力設定については、前述の[分析用データを出力]を参照してください。" ],
           [ "なお、BigQueryへの出力には対応していません。" ],
           [ { value: "AFE - セグメントを出力", rowSpan: 3 }, "セグメントを出力するAFEと出力設定を指定します。" ],
           [ "出力設定については、前述の[分析用データを出力]を参照してください。" ],
           [ "なお、BigQueryへの出力には対応していません。" ],
           [ { value: "ターゲットリスト-リストを出力", rowSpan: 8 }, "リストを出力するターゲットリスト、出力設定および予測の基準日を指定します。" ],
           [ "- 出力設定については、前述の[分析用データを出力]を参照してください。" ],
           [ "　なお、BigQueryへの出力には対応していません。" ],
           [ "- 予測の基準日は、以下のいずれかから選択できます。" ],
           [ "　- [日付を指定]：" ],
           [ "　　任意の日付を指定できます。" ],
           [ "　- [スケジュール実行日から指定]：" ],
           [ "　　スケジュール実行日を基準として、何日前を予測の基準日とするかを指定できます。" ],
        ]}
      />

1. 設定が完了したら、[保存]ボタンをクリックしてください。

### スケジュールの即時実行/編集/削除
スケジュールの即時実行、編集、または削除について説明します。

<Img src="/assets/img/capture/capture-schedule-5.png" alt="スケジュール" client:load />

1. スケジュールに設定した内容を即時に実行します。
1. スケジュールの設定、および状態を変更できます。
1. スケジュールを削除します。

## 履歴
スケジュールの実行結果(履歴)の確認方法を説明します。

1. [スケジュール機能]ボタン(以下画面の青枠部分)をクリックします。

   <Img src="/assets/img/capture/capture-schedule-log-1.png" alt="[スケジュール機能]ボタン" client:load />

1. [スケジュール一覧]画面が表示されます。\
   [履歴]メニューから、スケジュールを実行した結果(履歴)を確認することができます。

   <Img src="/assets/img/capture/capture-schedule-log-2.png" alt="履歴" client:load />
