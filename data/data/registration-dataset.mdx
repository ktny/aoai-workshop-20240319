---
title: データのインポート
---
import Img from "../../components/Img.tsx";
import Table from "../../components/commons/Table";

KIにデータをインポートする方法について説明します。

- ローカルファイルを指定する方法
- データベースを指定する方法
- URLを指定する方法
- スプレッドシートに直接入力する方法:version[2.3.0]
- 複数のデータを連結する方法

## ローカルファイルを指定する

ローカルファイルからデータをインポートする方法について、説明します。\
インポートできるファイル形式は以下のとおりです。

<Table
  headers={["ファイル形式", "文字コード"]}
  rows={[
   [{ value: "CSVファイル / TSVファイル / TXTファイル", rowSpan: 6 }, "以下の文字コードに対応しています。" ],
   ["- UTF-8"],
   ["- UTF-16"],
   ["- Shift-JIS"],
   ["- Latin-1"],
   ["- Windows-1252"],
   ["Excelファイル(xls、 xlsx)", "-"]
  ]}
/>

1. [データセット一覧]画面の上へ、インポートするファイルをドラッグ&amp;ドロップします。\
   または[ファイル選択]ボタンをクリックして、インポートするファイルを指定します。
1. ファイルのプレビューが表示されますので、各種設定をおこない[インポート]ボタンをクリックします。

   <Img src="/assets/img/capture/capture-dataset-0.png" alt="データセットプレビュー" client:load />

   1. ヘッダー(列名)となる行番号を指定します。
   1. データで使用している引用符をプルダウンから選択します。
   1. データの区切り文字をプルダウンから選択します。
   1. CSVファイル、TSVファイル、またはTXTファイルの場合は、エンコードをプルダウンから選択します。\
      Excelファイルの場合は、インポートするシート名をプルダウンから選択します。
   1. チェックを入れると、項目番号8でデータ型を変換する場合に、変換後の型に対応していない例外データを強制的にNULL(空欄)に変更します。
   1. キーワードで、列名を検索できます。
   1. インポートしたい列にチェックを入れます。インポートできる列数の上限は、1,000列です。\
      [すべてチェック]ボタンをクリックすると、すべての列にチェックを入れることができます。
      [すべてチェックを外す]ボタンをクリックすると、すべての列からチェックをはずすことができます。
   1. クリックすると、データ型を変更してインポートすることができます。変更後のデータ型に対応していないデータが含まれている場合は、文字列型に変更されてしまいます。なお、項目番号5にチェックを入れると、強制的にデータ型の変更をすることができます。

   データのインポートが完了すると、[データセット一覧]画面にデータセットが追加されます。

   :::note{.hint}
   ヒント

   データセットに対して共有設定をする場合は、
   「[データセット一覧画面](/guide/dataset-list/index.html)」、および「[ユーザーの権限種別と利用できる機能](/guide/user-management/index.html#ユーザーの権限種別と利用できる機能)」を参照してください。
   :::

## データベースを指定する

データベースからデータをインポートする方法について、説明します。

KIで対応しているデータベースは、以下のとおりです。

- Oracle
- MySQL
- PostgreSQL
- SQLServer
- JDBC
- Salesforce
- Amazon Redshift
- BigQuery:version[2.1.4]
- Amazon S3:version[2.2.0]
- Google Cloud Storage:version[2.2.0]

手順の詳細については、「[各種データベースからインポート](/guide/registration-from-database/index.html)」を参照してください。

データのインポートが完了すると、[データセット一覧]画面にデータセットが表示されます。

:::note{.hint}
ヒント

データセットに対して共有設定をする場合は、
「[データセット一覧画面](/guide/dataset-list/index.html)」、および「[ユーザーの権限種別と利用できる機能](/guide/user-management/index.html#ユーザーの権限種別と利用できる機能)」を参照してください。
:::

## URLを指定する

URLを指定してデータをインポートする方法について、説明します。\
使用できるプロトコルの種類と、インポートできるファイル形式は以下のとおりです。

- 使用できるプロトコルの種類

  - HTTP/HTTPS
  - Windowsファイル共有
  - Amazon S3(非推奨)
  - Google Cloud Storage(非推奨)

  Amazon S3とGoogle Cloud Storageについては、データベースを指定してインポートする方法をご利用ください。\
  手順の詳細は、「[データベースを指定する](#データベースを指定する)」を参照してください。

-  インポートできるファイル形式

   <Table
     headers={["ファイル形式", "文字コード"]}
     rows={[
       [{ value: "CSVファイル / TSVファイル / TXTファイル", rowSpan: 6 }, "以下の文字コードに対応しています。" ],
       ["- UTF-8"],
       ["- UTF-16"],
       ["- Shift-JIS"],
       ["- Latin-1"],
       ["- Windows-1252"],
       ["Excelファイル(xls、 xlsx)", "-"]
     ]}
   />

1. [データセット一覧]画面から、[URL入力]ボタンをクリックします。
   <Img src="/assets/img/capture/capture-dataset-3.png" alt="データセット一覧画面" client:load />

1. [URLからインポート]画面が表示されますので、指定するプロトコルに応じて各種設定をおこない[インポート]ボタンをクリックします。

   ### プロトコルに「HTTP/HTTPS」を指定した場合

   <Img src="/assets/img/capture/capture-dataset-4.png" alt="URLからインポート画面" client:load />

   1. ファイルのURLを指定します。

   ### プロトコルに「Windowsファイル共有」を指定した場合

   ファイル共有場所への接続設定をおこないます。

   <Img src="/assets/img/capture/capture-dataset-5.png" alt="URLからインポート画面" client:load />

   1. ファイルパスを指定します。
   1. ワークグループを指定します。
   1. ユーザー名を指定します。
   1. パスワードを指定します。

   ### プロトコルに「Amazon S3」を指定する場合(非推奨)

   Amazon S3への接続設定をおこないます。

   <Img src="/assets/img/capture/capture-dataset-6.png" alt="Amazon S3からインポート画面" client:load />

   1. S3 URIを指定します。
   1. 特定の認証情報を使用する場合は、チェックを入れてください。

      :::note{.hint}
      ヒント

      特定の認証情報を使用しない場合、Amazon S3への認証は、AWSのデフォルトの認証情報プロバイダーチェーンに従っておこなわれます。\
      詳細については以下のページを参照してください。\
      [https://docs.aws.amazon.com/ja_jp/sdk-for-java/v1/developer-guide/credentials.html](https://docs.aws.amazon.com/ja_jp/sdk-for-java/v1/developer-guide/credentials.html)
      :::

   1. 項目番号2でチェックを入れた場合は、アクセスキーIDを指定します。
   1. 項目番号2でチェックを入れた場合は、シークレットアクセスキーを指定します。

   ### プロトコルに「Google Cloud Storage」を指定する場合(非推奨)

   Google Cloud Storageへの接続設定をおこないます。

   <Img src="/assets/img/capture/capture-dataset-7.png" alt="Google Cloud Storageからインポート画面" client:load />

   1. GCS URIを指定します。
   1. 特定の認証情報を使用する場合は、チェックを入れてください。

      :::note{.hint}
      ヒント

      特定の認証情報を使用しない場合、Google Cloud Storageへの認証は、Application Default Credentials (ADC)というライブラリでサービスアカウントの認証情報が自動で検索されておこなわれます。\
      詳細については以下のページを参照してください。\
      [https://cloud.google.com/docs/authentication?hl=ja#adc](https://cloud.google.com/docs/authentication?hl=ja#adc)
      :::

   1. 項目番号2でチェックを入れた場合は、JSON形式のサービスアカウントキーを指定します。

   以降の手順は、「[ローカルファイルを指定する](#ローカルファイルを指定する)」の手順2.以降を参照してください。

   ## スプレッドシートに直接入力する
   :version[2.3.0]

   KIのスプレッドシートに直接データを入力してインポートする方法について、説明します。\
   この方法でインポートしたデータセットは、インポート後もスプレッドシートから簡単にデータを編集できます。

   1. [データセット一覧]画面から、[スプレッドシートに直接入力]ボタンをクリックします。
      <Img src="/assets/img/capture/capture-dataset-11.png" alt="データセット一覧画面" client:load />
   1. [スプレッドシートに直接入力で追加]画面が表示されますので、各項目を入力して[データ追加]ボタンをクリックします。
      <Img src="/assets/img/capture/capture-dataset-12.png" alt="スプレッドシートに直接入力で追加画面" client:load />
      1. データセット名を指定します。
      1. インポートするデータを入力します。
         - 1行目にはデータの列名を入力してください。
         - クリップボードからデータを貼り付けたい場合は、セルを選択して[Ctrl]キー+Vを押してください。\
           HTTPS環境であれば、セル上で右クリックして[貼り付け]を選択することでも貼り付け可能です。\
           なお、データの貼り付けでは、タブが区切り文字として扱われます。
         - 列のデータ型は、値の内容によらずデフォルトでは文字列型として取り込まれます。他のデータ型としてインポートする場合は、列上部のプルダウンから指定してください。
         - 行番号/列番号を右クリックすると、行/列の挿入、および削除をおこなえます。

      :::note{.hint}
      ヒント

      [データセット一覧]画面で編集したいデータセットの[編集]アイコン(以下画面の青枠部分)をクリックすると、データを再編集できます。
      <Img src="/assets/img/capture/capture-dataset-13.png" alt="データセット一覧画面" client:load />
      :::

## 複数のデータを連結する

複数のデータを連結してインポートする方法について、説明します。\
KIでは、複数のデータを行連結し1つのデータセットとして扱う連結データセット機能を用意しています。\
連結データセットを用いることにより、日々ファイルが作成されるようなトランザクションデータを容易に結合でき、1つのデータセットとして扱うことが可能です。

1. [データセット一覧]画面の[連結データセット作成]ボタンをクリックします。
   <Img src="/assets/img/capture/capture-dataset-8.png" alt="データセット一覧画面" client:load />

1. [新しい連結データセット]画面が表示されますので、データの追加や設定をおこない[OK]ボタンをクリックします。
   <Img src="/assets/img/capture/capture-dataset-9.png" alt="新しい連結データセット画面" client:load />

   1. 連結するデータを追加します。\
      追加する手順については、前述の各インポート手順を参照してください。
   1. 列名の並び順が異なるデータに対しての連結方法を、[列名で連結]と[列の位置で連結]のいずれかで指定してください。
1. 設定が完了したら、[OK]ボタンをクリックしてください。

連結データセットの作成が完了すると、[データセット一覧]画面に連結データセットが追加されます。

:::note{.hint}
ヒント

連結データセットを編集する場合は、以下(青枠部分)をクリックしてください。
<Img src="/assets/img/capture/capture-dataset-10.png" alt="データセット一覧画面" client:load />
:::
